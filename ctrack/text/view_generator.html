#view_generator
{view_head}
<style>
	.main_wrap{height:100%;}
	.overlay{background-color:#fff;}
	#background_image{url('/art/mexico_background_image.jpg')};{css}
</style>

{beige}
{instructions}
{generator}
<!--{main_datainvestigators}-->
{view_tail}a


#generator_crs_error
<div class="reminder_wrap top">
Please select <b>ONE</b> recipient and <b>NO</b> publisher to generate content here <p>- or choose a different View.</p>
</div>
#generator
<div id="generator" class="generator">
<form>

<div class="instruct_side">1</div><div class="instruct_more">
<div class="instruct_rel">
	<span class="drop_arrow"></span>
<span class="opt">PUBLISHER</span>
<select multiple id="generator_publisher" class="chosen">
	<option value></option>
	{generator_options_publisher}
</select>
</div>

<div class="instruct_rel">
	<span class="drop_arrow b"></span>
<span class="opt">RECIPIENT</span>
<select multiple id="generator_country" class="chosen">
	<option value></option>
	{generator_options_country}
</select>
</div>
</div>

<div class="instruct_chunk"></div>
<div class="instruct_side">2</div><div class="instruct_more">
<div>
<span class="opt">VIEW</span>
<select id="generator_view" class="chosen">
	<option value></option>
	{generator_options_view}
</select>
<a class="toggle" onclick="$('.view_wrap').toggle();">Example Views</a>
</div>

<div id="generator_aid_div" style="display:none;" >
<span class="opt">IATI-ID</span>
<input type="text" id="generator_aid" class="chosen" value="" />
<span class="txt">Enter an IATI Identifier to display a single activity <b>OR</b></span>
</div>

<div id="generator_limit_div" style="display:none;" >
<span class="opt">LIMIT</span>
<input type="text" id="generator_limit" class="chosen" value="1" />
<span class="txt">Enter the maximum number of activities to show. <i>Press ENTER to update your content below.</i> <b>Type -1 to show ALL.</b></span>
</div>



<div id="generator_maxheight_div" style="display:none;" >
<span class="opt">HEIGHT</span>
<input type="text" id="generator_maxheight" class="chosen" value="" />
<span class="txt">Enter the maximum height in pixels (this enables scrolling content). <i>Press ENTER to update your content below. <b>Leave blank for full height.</b></i></span>
<select id="generator_maxheight_dropdown" class="chosen"><option value></option>{generator_options_height}</select>
</div>

<div id="generator_usd_div" style="display:none;" >
<span class="opt">CURRENCY</span>
<select id="generator_usd" class="chosen"><option value></option>{generator_options_usd}</select>
</div>


<div class="view_wrap">
	<div class="view_info"><span>Example views</span><span class="see">Pick one to update the preview of your widget below. <i><b>Scroll down to view it.</b></i></span></div>
	<div class="view_links">
		<a href="" class="view" onclick="$('#generator_view').val('publisher_countries').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/countriesall.png" width="260"/>
			<span class="imgtxt">Recipients (table)</span>
			<span class="overtxt">Publisher data</span>
		</a><a href="" class="view mid" onclick="$('#generator_view').val('publisher_countries_top').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/crsdonortop.png" width="260"/>
			<span class="imgtxt">Top Recipients (graph)</span>
			<span class="overtxt">Publisher data</span>
		</a><a href="" class="view" onclick="$('#generator_view').val('publisher_sectors').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/countriesall.png" width="260"/>
			<span class="imgtxt">Sectors (table)</span>
			<span class="overtxt">Publisher data</span>
		</a>
	</div>
	<div class="view_links">
		<a href="" class="view" onclick="$('#generator_view').val('publisher_sectors_top').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/crssectortop.png" width="260"/>
			<span class="imgtxt">Top Sectors (graph)</span>
			<span class="overtxt">Publisher data</span>
		</a><a href="" class="view mid" onclick="$('#generator_view').val('map').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/map.png" width="260"/>
			<span class="imgtxt">Map (only shows precise locations of activities)</span>
		</a><a href="" class="view" onclick="$('#generator_view').val('stats').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/overview.png" width="260"/>
			<span class="imgtxt">Overview (statistics)</span>
		</a>
	</div>
	<div class="view_links">
		<a href="" class="view" onclick="$('#generator_view').val('donors').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/countriesall.png" width="260"/>
			<span class="imgtxt">Donors for a single recipient (table)</span>
			<span class="overtxt">Recipient data only</span>
		</a><a href="" class="view mid" onclick="$('#generator_view').val('donors_top').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/crsdonortop.png" width="260"/>
			<span class="imgtxt">Top Donors for a single recipient (graph)</span>
			<span class="overtxt">Recipient data only</span>
		</a><a href="" class="view" onclick="$('#generator_view').val('sectors').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/countriesall.png" width="260"/>
			<span class="imgtxt">Sectors for a single recipient (table)</span>
			<span class="overtxt">Recipient data only</span>
		</a>
	</div>
	<div class="view_links">
		<a href="" class="view" onclick="$('#generator_view').val('sectors_top').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/crssectortop.png" width="260"/>
			<span class="imgtxt">Top Sectors for a single recipient (graph)</span>
			<span class="overtxt">Recipient data only</span>
		</a><a href="" class="view mid savi" onclick="$('#generator_view').val('act').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/savi.png" width="260"/>
			<span class="imgtxt">Activities displayed using SAVi</span>
		</a><a href="" class="view" onclick="$('#generator_view').val('list_activities').trigger('chosen:updated').trigger('change');return false;" >
			<img src="art/generator/activities.png" width="260"/>
			<span class="imgtxt">List of activities</span>
		</a>
	</div>
</div>
</div>

<div class="instruct_chunk"></div>
<div class="instruct_down">See the content you have generated below. This will update automatically when you have selected from the above dropdowns.</div>

<div class="instruct_chunk"></div>
<div class="instruct_side">3</div><div class="instruct_more a">
<div>
<span class="opt">STYLE</span>
<select id="generator_skin" class="chosen">
	<option value></option>
	{generator_options_skin}
</select>
</div>

<div>
<span class="opt">SIZE</span>
<select id="generator_size" class="chosen">
	<option value></option>
	{generator_options_size}
</select>
</div>
</div><div class="instruct_more b">These are optional.</div>

<div class="instruct_chunk"></div>
<div class="instruct_side">4</div><div class="instruct_more">
<div class="instruct_info">Copy &amp; paste the code below into your webpage / blog post to embed the content you have generated.</div>
<textarea id="generator_textarea"></textarea>
</div>

</form>
</div>
<div id="frame" class="frame"></div>
{reminder}

#instructions
<nav>
	<div class="menu-wrap">
		<div class="img-wrap">
			<a href="/"><img class="logo-img" src="/art/UNDG_logo.png" alt="UNDG logo"/></a>
		</div>
		<div class="menu-link-wrap">
			<!--<div class="menu">-->
				<!--<a style="font-weight:600; font-size:12px; color:gold;" href="https://undg.org/undg-data-visualization-contest/" target="_blank">-->
					<!--<span>{data_visualization_contest}</span>-->
				<!--</a>-->
			<!--</div>-->
			<div class="menu">
				<a href="about.html">
					<span>{about_text}</span>
				</a>
			</div>
			<div class="menu">
				<a href="/ctrack.html#view=generator">
					<span>{generator_text}</span>
				</a>
			</div>
			<div class="menu">
				<a style="font-weight:600; font-size:12px; color:gold;" href="http://open.undg.org/issues/issues/create/guest" target="_blank">
					<span>{develop_button_text}</span>
				</a>
				<div id="myModal" class="modal">
					<div class="modal-content">
						<span class="close">×</span>
						<h2 class="modal-header">Send Feedback</h2>
						<div class="modal-body">
							<div id="emptyAlert"></div>
							<form id="feedbackForm" name="feedbackForms">
								<input class="form-control" type="text" id="fullname" name="fullname" placeholder="YOUR NAME" required>
								<input class="form-control" type="email" id="email" name="email" placeholder="YOUR EMAIL" required>
								<textarea class="form-control" placeholder="YOUR MESSAGE" id="message" name="message" required></textarea>
								<button class="form-button" type="button" id="sendFeedback">Send Message</button>
							</form>
							<div id="githubIssue">You can also post Github issues <a href="https://github.com/younginnovations/UN-Transparency-Portal/issues" target="_blank">here</a></div>
						</div>
					</div>
				</div>
				<div id="myModalSuccess" class="modalSuccess">
					<div class="modal-content-success">
						<span class="close">×</span>
						<h2 class="modal-header">Send Feedback</h2>
						<div class="modal-body">
							<h2 class="successMessage">Your message has been successfully sent.</h2>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</nav>
<script>
	$(function(){
		var modal = document.getElementById('myModal');

		var btn = document.getElementById("sendFeedbackPopup");

		var cross = document.getElementsByClassName("close")[0];

		btn.onclick = function() {
			modal.style.display = "block";
			$("body").css('overflow','hidden');
		}

		cross.onclick = function() {
			modal.style.display = "none";
			$("body").css('overflow','visible');
		}

		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
				$("body").css('overflow','visible');
			}
		}
		$("#sendFeedback").on('click',function(e){
			e.preventDefault();
			var name  = $('#fullname').val();
			var trimmedName = $.trim(name);
			var email  = $('#email').val();
			var message = $('#message').val();
			var trimmedMessage = $.trim(message);
			var atPos = email.indexOf("@");
			var dotPos = email.lastIndexOf(".");
			if(trimmedName == ""){
				$("#emptyAlert").html("Please enter your name!");
				$("#fullname").focus();
				return false;
			}
			if(email == ""){
				$("#emptyAlert").html("Please enter your email address!");
				$("#email").focus();
				return false;
			}
			if( atPos < 1 || dotPos < atPos+2 || dotPos+2>=email.length){
				$("#emptyAlert").html("Please enter a valid email address!");
				$("#email").css("border","1px solid #BB0303");
				return false;
			}
			if(trimmedMessage == ""){
				$("#emptyAlert").html("Please enter your message!");
				$("#message").focus();
				return false;
			}
			var data = {name: name, email: email,message:message};
			$.ajax({
				url : '/feedback',
				data : data,
				success : function(response){
					$("#myModal").hide();
					$("#emptyAlert").empty();
					$('#fullname').val("");
					$('#email').val("");
					$("#email").css("border","1px solid #bbb");
					$("#email").css("background","#fff");
					$('#message').val("");
					$("#myModalSuccess").show();
					setInterval(function(){
						$("#myModalSuccess").hide();
						$("body").css('overflow','visible');
					},3000);
				}
			});
		});
	});
</script>
<div class="crumb_wrap">
	<div>
		<a href="/" class="crumb first">{crumbname_home}</a> >
		<span>generator</span>
	</div>
</div>

<div class="instruct_wrap">
	<div class="default">

		<div class="instruct_head"> Create UNDG’s IATI content with our generator</div>

	</div>
</div>
<div class="instruct_col_wrap">
	<div class="default"><div class="mid_wrap"></div><div class="mid_wrap"><div class="arrow"></div></div></div>
	<div class="default">
		<div class="instruct_col first">
			<div class="instruct_num">1</div>
			<div class="instruct_text">Pick your data</div>
			<div class="instruct_sub">Choose <b>Publisher</b>(s) &amp;/or <b>Recipient</b>(s) data to display.</div>
		</div><div class="instruct_col">
			<div class="instruct_num">2</div>
			<div class="instruct_text">Choose a View</div>
			<div class="instruct_sub">Select a way to display the data (list, table, map etc).</div>
		</div><div class="instruct_col">
			<div class="instruct_num">3</div>
			<div class="instruct_text">Pick a style &amp; size (optional)</div>
			<div class="instruct_sub">Choose from the styles and width sizes available.</div>
		</div><div class="instruct_col last">
			<div class="instruct_num">4</div>
			<div class="instruct_text">Use your content</div>
			<div class="instruct_sub">Copy the generated code, use on your website/blog.</div>
		</div>
	</div>
</div>

#reminder
<div class="reminder_wrap">
	<div class="tips_head">Tips:</div>
	<p>You can compare multiple datasets by choosing multiple RECIPIENTS and/or PUBLISHERS.</p>
	<p>Picking both PUBLISHER and RECIPIENT data at the same time will limit the data in your generated content.</p>
	<p>The SIZE option allows you to generate a variety of blog-friendly sized content.</p>
	<p>Empty tables are due to no data found.
	<p><b>Data populating the tables can be quite large. Please wait until the spinner disappears for your widget to appear.</b></p>
	<p>All data is <b>LIVE</b> data and will change if these records are updated.</p>
	<p><b>Stuck?</b> <a href="/news/2014-11-30-Interactive-IATI-data-d-portal-generator.html">Click here for some examples of what you can do</a>.</p>

	<a href="mailto:support@iatistandard.org" class="mail">For all questions, suggestions and feedback please contact support@iatistandard.org</a>
</div>

#footer_pick_text
A 2016 project by

#css
body				{font-size:16px;}
textarea			{display:block; width:800px; height:110px; margin-top:5px;border: 2px solid #d8d8d8; border-radius: 6px;}

form div			{padding:5px 0;}
form div span.opt	{display:inline-block; min-width:100px; text-align:left; vertical-align:middle; margin-right:10px;}
select				{border-radius:2px;}
 #frame				{margin:0 auto; width:960px; padding:20px 20px 0 20px; text-align:center;}
a#frame_fix_size	{display:block; margin:0 auto; width:960px; border-radius:4px; padding:10px 0; text-align:center; background-color:#2573CD; color:#FFF; margin-top:10px; margin-bottom:10px;}
a#frame_fix_size:hover	{background-color:#2F84E5;}
.generator			{width:960px; margin:0 auto; padding:35px 0 60px;color: #333;border: 2px solid rgba(0, 103, 177, 0.1);border-radius: 6px;}
.default			{width:960px; margin:0 auto; padding:0;}
.mid_wrap			{display:inline-block; vertical-align:top; width:466px; max-width:466px;}
.arrow				{width:0; height:0; border-top:15px solid #0067B1; border-left:15px solid transparent; border-right:15px solid transparent;}
.instruct_wrap		{margin:15px auto 0; width:960px; padding:32px 0; background-color:#0067B1;border-radius:4px;}
.instruct_head		{text-align:center; color:#FFF; font-size:32px;lineheight: 38px;}
.instruct_info		{margin-top:15px;}
.instruct_down		{margin-left:70px; padding:20px 0; font-size:14px; line-height:20px;}
.instruct_col_wrap	{width:100%;}
.instruct_col		{display:inline-block; vertical-align:top; width:231px; padding:30px 20px; border: 2px solid rgba(0, 103, 177, 0.1); margin:25px 6px 40px; box-sizing:border-box; border-radius:6px; max-height:280px; height:280px;}
.instruct_col.first	{margin-left:0;}
.instruct_col.last	{margin-right:0;}
.instruct_num		{text-align:center; color:#333; font-size:100px; font-weight: bold; line-height: 106px; margin-bottom:10px;}
.instruct_text		{text-align:center; color:#333; font-size: 24px; line-height: 30px;}
.instruct_sub		{text-align:center; color: rgba(51, 51, 51, 0.7); font-size: 14px; line-height: 20px; margin-top:10px;}
.instruct_fix		{background-color:#333; color:#ccc; padding:15px 0; text-align:center;}
.instruct_fix span	{color:#4CA0FF; font-weight:bold;}
.chosen-container	{min-width:250px; max-width:535px; width: 535px !important;}
.reminder_wrap		{font-size: 19px;line-height: 25px;max-width: 860px;margin: 50px auto;background: #0067B1;padding: 50px;border-radius: 4px;color: rgba(255, 255, 255, 0.7);}
.reminder_wrap b    {font-weight: normal}
.reminder_wrap.top	{background-color:#2573CD; font-size:1.4em; color:#FFF; padding:30px 40px; margin-bottom:0;}
.reminder_wrap p	{padding-top:15px; color:#ccc; display:list-item; list-style-position:inside;}
.tips_head			{border-bottom:1px solid rgba(255, 255, 255, 0.19); padding:15px 0 10px 0; font-size:1.2em; color:#fff; display:block;}
.reminder_wrap.top p{color:#FFF;}
.view_info			{padding-bottom:10px; color:#FFF; font-size:0.9em; border-bottom:3px solid #666; margin-bottom:20px;}
.view_info span		{display:inline-block; vertical-align:top; width:100px; color:#ccc;}
.view_info span.see	{width:740px; text-align:right; color:#FFF;}
.view_wrap			{display:none; vertical-align:top; margin-left:110px;}
.view_links			{margin-bottom:20px;}
a.view				{display:inline-block; vertical-align:top; width:210px; position:relative;}
a.view img			{width: 100%;}
a.view.mid			{margin:0 30px;}
a.view.mid.savi		{text-align:center;}
a.view span.imgtxt	{display:block; margin-top:5px; color:#ccc; font-size:0.8em;}
a.mail				{display:block; margin-top:15px; color:#4CA0FF; padding:5px 0;}
a.mail:hover		{color:#74B5FF;}
a.logo				{display:inline-block; vertical-align:bottom; width:250px;}
a.toggle			{display:inline-block; vertical-align:middle; margin-left:20px; font-size:16px; color:#0067B1;}
a.toggle:hover		{color:#004373;}
 #generator_aid_div span.txt, #generator_limit_div span.txt, #generator_maxheight_div span.txt	{display:inline-block; vertical-align:middle; font-size:0.9em; color:#ccc; width:520px;
margin-left:10px; line-height:1.5em;}

span.overtxt		{display:none;}
a.view:hover span.overtxt	{display:block; position:absolute; top:0; left:0; width:100%; height:119px; background-color:rgba(0,0,0,0.6); color:#FFF; text-align:center; line-height:6em;}

.instruct_side		{display:inline-block; vertical-align:middle; width:30px; font-size:100px; line-height: 106px; color:#333; font-weight: bold; padding-left: 30px; margin-right: 60px;}
.instruct_more		{display:inline-block; vertical-align:middle; width: 800px;}
.instruct_more.a	{width:415px;}
.instruct_more.b	{width:200px; font-size:0.9em; color:#CCC; font-style:italic;}
.instruct_chunk		{width:960px; margin:0 auto; padding-top:10px; border-top: 2px solid rgba(0, 103, 177, 0.1); margin-top:10px;}

.instruct_rel		{position:relative;}
span.drop_arrow		{display:block; width:20px; height:100%; background:url(/art/chosen-sprite.png) no-repeat 0 2px; text-align:right; position:absolute; left:595px; top:15px; z-index:999; pointer-events:none; display: none;}
span.drop_arrow.b	{left:393px;}

div#generator_maxheight_dropdown_chosen	{margin-left:113px;}

nav {background: #0067B1;padding: 15px 32px;}
.menu-wrap {overflow: hidden;}
.logo-img {height: 61px;}
.img-wrap {float: left;}
.menu {display: inline-block;float: left;margin-right: 15px;}
.menu a {font-size: 11px;text-transform: uppercase;}
.menu:last-child {margin-right: 0;}
.menu-link-wrap {float: right;margin-top: 10px;}
.chosen-container-multi .chosen-choices{width: 100%;min-height: 50px !important;border: 2px solid #d8d8d8;border-radius: 4px;background-image: none;}
.chosen-container-single .chosen-single {width: 100%;height: 50px !important;border: 2px solid #d8d8d8;border-radius: 4px;background-image: none;background: none;box-shadow: none;padding: 0}
.chosen-container-single .chosen-single span {margin: 15px 0 10px;color: rgba(51, 51, 51, 0.4);display: inline-block;padding-left: 20px;font-size: 16px;width: auto !important;}
.chosen-container-single .chosen-single div b {display: none;}
.chosen-container-multi .chosen-choices li.search-field {width: 100%;}
.chosen-container-multi .chosen-choices li.search-field input[type=text] {margin: 10px 0;color: rgba(51, 51, 51, 0.4);display: inline-block;padding-left: 20px;font-size: 16px;width: auto !important;}
.instruct_more.a .chosen-container {width: 245px !important;}
.chosen-container-active .chosen-choices {box-shadow: none;}
.chosen-container-active.chosen-with-drop .chosen-single {border: 2px solid #d8d8d8; background-image: none; box-shadow: none;}
.chosen-container-single .chosen-single abbr {top: 20px;}

@media screen
and (min-width: 1400px) {
.menu-wrap {
	overflow: hidden;
	max-width: 960px;
	margin: 0 auto;
	}
}
